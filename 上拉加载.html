<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<title>弹出层</title>
<link href="css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
<link href="css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
<link href="css/animate.min.css" rel="stylesheet">
<link href="css/style.min862f.css?v=4.1.0" rel="stylesheet">
<link href="css/base.css" rel="stylesheet">
<script src="http://css.gzedu.com/common/js/mobile/zepto.min.js" charset="utf-8"></script>
</head>

<body>
<style>
	#box p{margin-bottom:10px;}	
</style>
<div id="box" style="height:200px; background:red;"></div>
<div id="box" style="height:200px; background:blue;"></div>
<div id="box" style="height:200px; background:green;">
	
</div>
<div id="box" style="height:200px; background:white;">
	
</div>
<div id="box" style="height:200px; background:black;">
	
</div>

<style>
.mask_bg{background:rgba(0,0,0,.8); height:100%; width:100%; position:fixed; top:0; left:0; display:table;z-index: 10000; opacity:0; -webkit-transition:all .3s; transition:all .3s;}
.mask_bg_ctn{display:table-cell; vertical-align:middle; text-align:center;}
.mask_bg.pop_show{opacity:1;}
</style>
<!--<script src="js/common.js"></script>-->
<script>
$(function(){
	function slideLoad(direction,callback){
		var startPosition, endPosition, flag = true,stop = false;
		var checkborder = function () {
			return ($(window).scrollTop() + $(window).height() > $(document).height() - 20) ? 'bottom' : ($(window).scrollTop() < 20) ? 'top' : null;
		};
		$(document).on('touchstart', function (e) {
			flag = checkborder();
			startPosition = e.touches[0].pageY;
		});
		$(document).on('touchcancel touchmove', function (e) {
			//e.preventDefault();
			endPosition = e.touches[0].pageY
			var diance = startPosition - endPosition;
			var bDiance = diance>0?'bottom':'top';
			
			if(flag == direction && bDiance == direction && Math.abs(diance) > 50){
				if ( !stop) {
					stop = true;
					callback();
					setTimeout(function(){stop = false;},1000); //防止加载多次
				}
			}
			
		});
	};

	
	slideLoad('bottom',function(){
		console.log('bottom')
	});
	
	slideLoad('top',function(){
		console.log('top')
	});
})
</script>
</body>
</html>
